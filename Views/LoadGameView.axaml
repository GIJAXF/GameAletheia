<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:GameAletheiaCross.ViewModels"
             x:Class="GameAletheiaCross.Views.LoadGameView"
             x:DataType="vm:LoadGameViewModel">

    <Grid>
        <!-- Imagen de fondo -->
        <Image Source="avares://GameAletheiaCross/Assets/Images/DefaultFondo.png"
               Stretch="UniformToFill"
               HorizontalAlignment="Center"
               VerticalAlignment="Center"/>
        
        <!-- Overlay oscuro -->
        <Border Background="#000000AA" />
        
        <!-- Contenido -->
        <StackPanel Margin="40"
                    Spacing="20"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">

            <TextBlock Text="CARGAR PARTIDA"
                       FontSize="32"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       Foreground="#00D9FF">
                <TextBlock.Effect>
                    <DropShadowEffect Color="Black" OffsetX="2" OffsetY="2" BlurRadius="8"/>
                </TextBlock.Effect>
            </TextBlock>

            <!-- Mostrar partidas guardadas -->
            <Border Background="#0a0a15" 
                   BorderBrush="#00D9FF" 
                   BorderThickness="3"
                   CornerRadius="10"
                   Padding="15"
                   MaxHeight="400"
                   MinWidth="600">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding Players}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Margin="5"
                                       Padding="20,15"
                                       Background="#0f3460"
                                       Foreground="White"
                                       BorderBrush="#00FF88"
                                       BorderThickness="2"
                                       CornerRadius="8"
                                       Command="{Binding $parent[ItemsControl].DataContext.SelectPlayerCommand}"
                                       CommandParameter="{Binding .}"
                                       HorizontalAlignment="Stretch"
                                       HorizontalContentAlignment="Left">
                                    <StackPanel Spacing="8">
                                        <TextBlock FontSize="14">
                                            <Run Text="Nombre:" FontSize="16"/>
                                            <Run Text="{Binding Name}" FontSize="18" FontWeight="Bold" Foreground="#00FF88"/>
                                            <Run Text=" — Nivel " FontSize="13" Foreground="#AAAAAA"/>
                                            <Run Text="{Binding CurrentLevel}" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                        </TextBlock>
                                        <StackPanel Orientation="Horizontal" Spacing="20">
                                            <TextBlock FontSize="12" Foreground="#00D9FF">
                                                <Run Text="Puntuacion: "/>
                                                <Run Text="{Binding TotalScore}" FontWeight="Bold"/>
                                            </TextBlock>
                                            <TextBlock FontSize="12" Foreground="#AAAAAA">
                                                <Run Text="Facción: "/>
                                                <Run Text="{Binding Faction}" Foreground="White" FontWeight="Bold"/>
                                            </TextBlock>
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>

            <!-- Usamos Border para el fondo, CornerRadius, y Margin -->
            <Border Background="#071930" 
                    CornerRadius="8"
                    HorizontalAlignment="Center"
                    BorderBrush="#FFFFFF"
                    BorderThickness="2"
                    Margin="20">
                
                <!-- El TextBlock solo maneja el texto y la fuente -->
                <TextBlock Text="{Binding Players.Count, StringFormat='Total de partidas guardadas: {0}'}"
                        FontSize="13"
                        Foreground="#ffffffff"
                        Padding="10, 5" />
                        <!-- Añadí Padding para que el texto no se pegue al borde. -->
            </Border>

            <Button Content="Volver"
                    Command="{Binding BackCommand}"
                    Width="250"
                    Height="60"
                    Margin="0,20,0,0"
                    HorizontalAlignment="Center"
                    Background="#0f3460"
                    Foreground="White"
                    BorderBrush="#FFFFFF"
                    BorderThickness="2"
                    FontWeight="Bold"
                    FontSize="16"
                    CornerRadius="8"/>
        </StackPanel>
    </Grid>
</UserControl>